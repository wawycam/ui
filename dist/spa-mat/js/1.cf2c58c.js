(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{NLq3:function(e,t,n){},SRfc:function(e,t,n){n("IU+Z")("match",1,function(e,t,n){return[function(n){"use strict";var a=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,a):new RegExp(n)[t](String(a))},n]})},dIPi:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{attrs:{view:"lHh Lpr lFf"}},[n("q-layout-header",[n("q-toolbar",{attrs:{color:"primary",glossy:"mat"===e.$q.theme,inverted:"ios"===e.$q.theme}},[n("q-toolbar-title",[e._v("\n        Wawy Configuration\n        "),n("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[n("strong",[e._v("UI version: ")]),n("span",{staticClass:"changelog",on:{click:function(t){e.getChangeLog("ui")}}},[e._v(e._s(e.uiVersion))]),e._v(" |\n          "),n("strong",[e._v("API version: ")]),n("span",{staticClass:"changelog",on:{click:function(t){e.getChangeLog("api")}}},[e._v(e._s(e.apiVersion))])])]),n("q-btn",{attrs:{flat:""},on:{click:e.haltOrRebootDialog}},[n("q-icon",{attrs:{name:"power_settings_new"}})],1)],1)],1),n("q-page-container",[n("router-view")],1),n("q-modal",{attrs:{"content-css":"padding: 20px"},model:{value:e.openChangeLog,callback:function(t){e.openChangeLog=t},expression:"openChangeLog"}},[n("h3",[e._v(e._s(e.repo)+" change log")]),n("q-list",{attrs:{"no-border":"","inset-separator":""}},e._l(e.changeLog,function(t){return n("q-item",{key:t.hash},[n("q-item-side",{attrs:{icon:"fab fa-github"}}),n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[n("a",{attrs:{href:"https://github.com/wawycam/"+e.repo+"/commit/"+t.hash,target:"_blank"}},[e._v(e._s(t.message))])]),n("q-item-tile",{attrs:{sublabel:"",lines:"2"}},[e._v("\n            "+e._s(e._f("date")(t.date))+"\n          ")])],1)],1)}))],1)],1)},r=[];a._withStripped=!0;n("KKXr"),n("SRfc"),n("pIFo"),n("yt8O"),n("RW0V"),n("rGqo"),n("a1Th");function o(e){return"[object Date]"===Object.prototype.toString.call(e)}var i=n("F3uk"),s=n("sVeV"),u=864e5,c=36e5,f=6e4,g=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g;function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e>0?"-":"+",a=Math.abs(e),r=Math.floor(a/60),o=a%60;return n+Object(i["d"])(r)+t+Object(i["d"])(o)}function h(e,t){var n=new Date(e.getFullYear(),t,0,0,0,0,0),a=n.getDate();e.setMonth(t-1,Math.min(a,e.getDate()))}function d(e,t,n){var a=new Date(e),r=n?1:-1;return Object.keys(t).forEach(function(e){if("month"!==e){var n="year"===e?"FullYear":Object(i["b"])("days"===e?"date":e);a["set".concat(n)](a["get".concat(n)]()+r*t[e])}else h(a,a.getMonth()+1+r*t.month)}),a}function p(e){if("number"===typeof e)return!0;var t=Date.parse(e);return!1===isNaN(t)}function m(e,t){return y(new Date,e,t)}function D(e){var t=new Date(e).getDay();return 0===t?7:t}function w(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var a=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-a);var r=(t-n)/(7*u);return 1+Math.floor(r)}function v(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=new Date(t).getTime(),o=new Date(n).getTime(),i=new Date(e).getTime();return a.inclusiveFrom&&r--,a.inclusiveTo&&o++,i>r&&i<o}function M(e,t){return d(e,t,!0)}function b(e,t){return d(e,t,!1)}function y(e,t,n){var a=new Date(e),r="set".concat(n?"UTC":"");return Object.keys(t).forEach(function(e){if("month"!==e){var n="year"===e?"FullYear":e.charAt(0).toUpperCase()+e.slice(1);a["".concat(r).concat(n)](t[e])}else h(a,t.month)}),a}function Y(e,t){var n=new Date(e);switch(t){case"year":n.setMonth(0);case"month":n.setDate(1);case"day":n.setHours(0);case"hour":n.setMinutes(0);case"minute":n.setSeconds(0);case"second":n.setMilliseconds(0)}return n}function O(e,t){var n=new Date(e);switch(t){case"year":n.setMonth(11);case"month":n.setDate(L(e));case"day":n.setHours(23);case"hour":n.setMinutes(59);case"minute":n.setSeconds(59);case"second":n.setMilliseconds(59)}return n}function S(e){for(var t=new Date(e),n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.forEach(function(e){t=Math.max(t,new Date(e))}),t}function q(e){for(var t=new Date(e),n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.forEach(function(e){t=Math.min(t,new Date(e))}),t}function T(e,t,n){return(e.getTime()-e.getTimezoneOffset()*f-(t.getTime()-t.getTimezoneOffset()*f))/n}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"days",a=new Date(e),r=new Date(t);switch(n){case"years":return a.getFullYear()-r.getFullYear();case"months":return 12*(a.getFullYear()-r.getFullYear())+a.getMonth()-r.getMonth();case"days":return T(Y(a,"day"),Y(r,"day"),u);case"hours":return T(Y(a,"hour"),Y(r,"hour"),c);case"minutes":return T(Y(a,"minute"),Y(r,"minute"),f);case"seconds":return T(Y(a,"second"),Y(r,"second"),1e3)}}function j(e){return H(e,Y(e,"year"),"days")+1}function F(e){return o(e)?"date":"number"===typeof e?"number":"string"}function _(e,t,n){if(e||0===e)switch(t){case"date":return e;case"number":return e.getTime();default:return A(e,n)}}function C(e,t,n){var a=new Date(e);if(t){var r=new Date(t);if(a<r)return r}if(n){var o=new Date(n);if(a>o)return o}return a}function x(e,t,n){var a=new Date(e),r=new Date(t);if(void 0===n)return a.getTime()===r.getTime();switch(n){case"second":if(a.getSeconds()!==r.getSeconds())return!1;case"minute":if(a.getMinutes()!==r.getMinutes())return!1;case"hour":if(a.getHours()!==r.getHours())return!1;case"day":if(a.getDate()!==r.getDate())return!1;case"month":if(a.getMonth()!==r.getMonth())return!1;case"year":if(a.getFullYear()!==r.getFullYear())return!1;break;default:throw new Error("date isSameDate unknown unit ".concat(n))}return!0}function L(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function k(e){if(e>=11&&e<=13)return"".concat(e,"th");switch(e%10){case 1:return"".concat(e,"st");case 2:return"".concat(e,"nd");case 3:return"".concat(e,"rd")}return"".concat(e,"th")}var V={YY:function(e){return Object(i["d"])(e.getFullYear(),4).substr(2)},YYYY:function(e){return Object(i["d"])(e.getFullYear(),4)},M:function(e){return e.getMonth()+1},MM:function(e){return Object(i["d"])(e.getMonth()+1)},MMM:function(e){return s["a"].lang.date.monthsShort[e.getMonth()]},MMMM:function(e){return s["a"].lang.date.months[e.getMonth()]},Q:function(e){return Math.ceil((e.getMonth()+1)/3)},Qo:function(e){return k(this.Q(e))},D:function(e){return e.getDate()},Do:function(e){return k(e.getDate())},DD:function(e){return Object(i["d"])(e.getDate())},DDD:function(e){return j(e)},DDDD:function(e){return Object(i["d"])(j(e),3)},d:function(e){return e.getDay()},dd:function(e){return this.dddd(e).slice(0,2)},ddd:function(e){return s["a"].lang.date.daysShort[e.getDay()]},dddd:function(e){return s["a"].lang.date.days[e.getDay()]},E:function(e){return e.getDay()||7},w:function(e){return w(e)},ww:function(e){return Object(i["d"])(w(e))},H:function(e){return e.getHours()},HH:function(e){return Object(i["d"])(e.getHours())},h:function(e){var t=e.getHours();return 0===t?12:t>12?t%12:t},hh:function(e){return Object(i["d"])(this.h(e))},m:function(e){return e.getMinutes()},mm:function(e){return Object(i["d"])(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return Object(i["d"])(e.getSeconds())},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return Object(i["d"])(Math.floor(e.getMilliseconds()/10))},SSS:function(e){return Object(i["d"])(e.getMilliseconds(),3)},A:function(e){return this.H(e)<12?"AM":"PM"},a:function(e){return this.H(e)<12?"am":"pm"},aa:function(e){return this.H(e)<12?"a.m.":"p.m."},Z:function(e){return l(e.getTimezoneOffset(),":")},ZZ:function(e){return l(e.getTimezoneOffset())},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()}};function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DDTHH:mm:ss.SSSZ";if(0===e||e){var n=new Date(e);return t.replace(g,function(e,t){return e in V?V[e](n):void 0===t?e:t.split("\\]").join("]")})}}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.match(g)}function $(e){return o(e)?new Date(e.getTime()):e}var z={isValid:p,buildDate:m,getDayOfWeek:D,getWeekOfYear:w,isBetweenDates:v,addToDate:M,subtractFromDate:b,adjustDate:y,startOfDate:Y,endOfDate:O,getMaxDate:S,getMinDate:q,getDateDiff:H,getDayOfYear:j,inferDateFormat:F,convertDateToFormat:_,getDateBetween:C,isSameDate:x,daysInMonth:L,formatter:V,formatDate:A,matchFormat:U,clone:$},I=n("iV8l"),E={name:"MyLayout",data:function(){return{openChangeLog:!1,repo:!1,uiVersion:"-",apiVersion:"-",changeLog:[]}},created:function(){var e=this;this.axios.get("/service/update?repo=ui").then(function(t){e.axios.get("/service/update?repo=api").then(function(n){e.uiVersion=t.data,e.apiVersion=n.data,e.applyUpdate()})})},filters:{date:function(e){return z.formatDate(e,"dddd DD MMMM YYYY - HH[h]mm")}},methods:{haltOrRebootDialog:function(){var e=this;this.$q.dialog({title:"Halt or Reboot",message:'Type "halt" or "reboot"',prompt:{model:""},cancel:!0}).then(function(t){"halt"===t.toLowerCase()?e.axios.post("/service/halt").then(function(t){201===t.status&&e.$router.push("/notconnected")}):"reboot"===t.toLowerCase()?(e.$q.loading.show({spinner:I["a"],message:"Waiting while rebooting...",spinnerSize:250,spinnerColor:"white"}),e.axios.post("/service/reboot").then(function(t){201===t.status&&setInterval(function(){e.axios.get("/service/serial").then(function(t){200===t.status&&(e.$q.loading.hide(),window.location.reload())})},1e4)})):e.$q.dialog({title:"Alert",message:'Keyword have to be "reboot" or "halt"'})})},getChangeLog:function(e){var t=this;this.repo=e.toUpperCase(),this.openChangeLog=!0,this.axios.get("/service/changelog?repo=".concat(e)).then(function(e){t.changeLog=e.data})},applyUpdate:function(){var e=this;"updateAvailable"===this.uiVersion?(this.$q.loading.show({spinner:I["a"],message:"Updating UI...please wait.",spinnerSize:250,spinnerColor:"white"}),this.axios.post("/service/update?repo=ui").then(function(){"updateAvailable"===e.apiVersion?(e.$q.loading.show({spinner:I["a"],message:"Updating API...please wait.",spinnerSize:250,spinnerColor:"white"}),e.axios.post("/service/update?repo=api").then(function(){window.location.reload()})):window.location.reload()})):"updateAvailable"===this.apiVersion&&(this.$q.loading.show({spinner:I["a"],message:"Updating API...please wait.",spinnerSize:250,spinnerColor:"white"}),this.axios.post("/service/update?repo=api").then(function(){window.location.reload()}))}}},R=E,Z=(n("mXhf"),n("KHd+")),P=Object(Z["a"])(R,a,r,!1,null,null,null);t["default"]=P.exports},mXhf:function(e,t,n){"use strict";var a=n("NLq3"),r=n.n(a);r.a}}]);