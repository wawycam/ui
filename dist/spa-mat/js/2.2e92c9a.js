(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{NLq3:function(t,e,n){},SRfc:function(t,e,n){n("IU+Z")("match",1,function(t,e,n){return[function(n){"use strict";var a=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,a):new RegExp(n)[e](String(a))},n]})},dIPi:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{attrs:{view:"lHh Lpr lFf"}},[n("q-layout-header",[n("q-toolbar",{attrs:{color:"primary",glossy:"mat"===t.$q.theme,inverted:"ios"===t.$q.theme}},[n("q-toolbar-title",[t._v("\n        Wawy Configuration\n        "),n("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[n("strong",[t._v("UI version: ")]),n("span",{staticClass:"changelog",on:{click:function(e){t.getChangeLog("ui")}}},[t._v(t._s(t.uiVersion))]),t._v(" |\n          "),n("strong",[t._v("API version: ")]),n("span",{staticClass:"changelog",on:{click:function(e){t.getChangeLog("api")}}},[t._v(t._s(t.apiVersion))])])]),n("q-btn",{attrs:{flat:""},on:{click:t.haltOrRebootDialog}},[n("q-icon",{attrs:{name:"power_settings_new"}})],1)],1)],1),n("q-page-container",[n("router-view")],1),n("q-modal",{attrs:{"content-css":"padding: 20px"},model:{value:t.openChangeLog,callback:function(e){t.openChangeLog=e},expression:"openChangeLog"}},[n("h3",[t._v(t._s(t.repo)+" change log")]),n("q-list",{attrs:{"no-border":"","inset-separator":""}},t._l(t.changeLog,function(e){return n("q-item",{key:e.hash},[n("q-item-side",{attrs:{icon:"fab fa-github"}}),n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[n("a",{attrs:{href:"https://github.com/wawycam/"+t.repo+"/commit/"+e.hash,target:"_blank"}},[t._v(t._s(e.message))])]),n("q-item-tile",{attrs:{sublabel:"",lines:"2"}},[t._v("\n            "+t._s(t._f("date")(e.date))+"\n          ")])],1)],1)}))],1)],1)},r=[];a._withStripped=!0;n("KKXr"),n("SRfc"),n("pIFo"),n("yt8O"),n("RW0V"),n("rGqo"),n("a1Th");function o(t){return"[object Date]"===Object.prototype.toString.call(t)}var i=n("F3uk"),s=n("sVeV"),u=864e5,c=36e5,f=6e4,l=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g;function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t>0?"-":"+",a=Math.abs(t),r=Math.floor(a/60),o=a%60;return n+Object(i["d"])(r)+e+Object(i["d"])(o)}function h(t,e){var n=new Date(t.getFullYear(),e,0,0,0,0,0),a=n.getDate();t.setMonth(e-1,Math.min(a,t.getDate()))}function d(t,e,n){var a=new Date(t),r=n?1:-1;return Object.keys(e).forEach(function(t){if("month"!==t){var n="year"===t?"FullYear":Object(i["b"])("days"===t?"date":t);a["set".concat(n)](a["get".concat(n)]()+r*e[t])}else h(a,a.getMonth()+1+r*e.month)}),a}function m(t){if("number"===typeof t)return!0;var e=Date.parse(t);return!1===isNaN(e)}function p(t,e){return y(new Date,t,e)}function D(t){var e=new Date(t).getDay();return 0===e?7:e}function w(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var a=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-a);var r=(e-n)/(7*u);return 1+Math.floor(r)}function v(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=new Date(e).getTime(),o=new Date(n).getTime(),i=new Date(t).getTime();return a.inclusiveFrom&&r--,a.inclusiveTo&&o++,i>r&&i<o}function M(t,e){return d(t,e,!0)}function b(t,e){return d(t,e,!1)}function y(t,e,n){var a=new Date(t),r="set".concat(n?"UTC":"");return Object.keys(e).forEach(function(t){if("month"!==t){var n="year"===t?"FullYear":t.charAt(0).toUpperCase()+t.slice(1);a["".concat(r).concat(n)](e[t])}else h(a,e.month)}),a}function Y(t,e){var n=new Date(t);switch(e){case"year":n.setMonth(0);case"month":n.setDate(1);case"day":n.setHours(0);case"hour":n.setMinutes(0);case"minute":n.setSeconds(0);case"second":n.setMilliseconds(0)}return n}function O(t,e){var n=new Date(t);switch(e){case"year":n.setMonth(11);case"month":n.setDate(k(t));case"day":n.setHours(23);case"hour":n.setMinutes(59);case"minute":n.setSeconds(59);case"second":n.setMilliseconds(59)}return n}function S(t){for(var e=new Date(t),n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.forEach(function(t){e=Math.max(e,new Date(t))}),e}function q(t){for(var e=new Date(t),n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.forEach(function(t){e=Math.min(e,new Date(t))}),e}function T(t,e,n){return(t.getTime()-t.getTimezoneOffset()*f-(e.getTime()-e.getTimezoneOffset()*f))/n}function H(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"days",a=new Date(t),r=new Date(e);switch(n){case"years":return a.getFullYear()-r.getFullYear();case"months":return 12*(a.getFullYear()-r.getFullYear())+a.getMonth()-r.getMonth();case"days":return T(Y(a,"day"),Y(r,"day"),u);case"hours":return T(Y(a,"hour"),Y(r,"hour"),c);case"minutes":return T(Y(a,"minute"),Y(r,"minute"),f);case"seconds":return T(Y(a,"second"),Y(r,"second"),1e3)}}function j(t){return H(t,Y(t,"year"),"days")+1}function F(t){return o(t)?"date":"number"===typeof t?"number":"string"}function _(t,e,n){if(t||0===t)switch(e){case"date":return t;case"number":return t.getTime();default:return A(t,n)}}function L(t,e,n){var a=new Date(t);if(e){var r=new Date(e);if(a<r)return r}if(n){var o=new Date(n);if(a>o)return o}return a}function C(t,e,n){var a=new Date(t),r=new Date(e);if(void 0===n)return a.getTime()===r.getTime();switch(n){case"second":if(a.getSeconds()!==r.getSeconds())return!1;case"minute":if(a.getMinutes()!==r.getMinutes())return!1;case"hour":if(a.getHours()!==r.getHours())return!1;case"day":if(a.getDate()!==r.getDate())return!1;case"month":if(a.getMonth()!==r.getMonth())return!1;case"year":if(a.getFullYear()!==r.getFullYear())return!1;break;default:throw new Error("date isSameDate unknown unit ".concat(n))}return!0}function k(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function x(t){if(t>=11&&t<=13)return"".concat(t,"th");switch(t%10){case 1:return"".concat(t,"st");case 2:return"".concat(t,"nd");case 3:return"".concat(t,"rd")}return"".concat(t,"th")}var V={YY:function(t){return Object(i["d"])(t.getFullYear(),4).substr(2)},YYYY:function(t){return Object(i["d"])(t.getFullYear(),4)},M:function(t){return t.getMonth()+1},MM:function(t){return Object(i["d"])(t.getMonth()+1)},MMM:function(t){return s["a"].lang.date.monthsShort[t.getMonth()]},MMMM:function(t){return s["a"].lang.date.months[t.getMonth()]},Q:function(t){return Math.ceil((t.getMonth()+1)/3)},Qo:function(t){return x(this.Q(t))},D:function(t){return t.getDate()},Do:function(t){return x(t.getDate())},DD:function(t){return Object(i["d"])(t.getDate())},DDD:function(t){return j(t)},DDDD:function(t){return Object(i["d"])(j(t),3)},d:function(t){return t.getDay()},dd:function(t){return this.dddd(t).slice(0,2)},ddd:function(t){return s["a"].lang.date.daysShort[t.getDay()]},dddd:function(t){return s["a"].lang.date.days[t.getDay()]},E:function(t){return t.getDay()||7},w:function(t){return w(t)},ww:function(t){return Object(i["d"])(w(t))},H:function(t){return t.getHours()},HH:function(t){return Object(i["d"])(t.getHours())},h:function(t){var e=t.getHours();return 0===e?12:e>12?e%12:e},hh:function(t){return Object(i["d"])(this.h(t))},m:function(t){return t.getMinutes()},mm:function(t){return Object(i["d"])(t.getMinutes())},s:function(t){return t.getSeconds()},ss:function(t){return Object(i["d"])(t.getSeconds())},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return Object(i["d"])(Math.floor(t.getMilliseconds()/10))},SSS:function(t){return Object(i["d"])(t.getMilliseconds(),3)},A:function(t){return this.H(t)<12?"AM":"PM"},a:function(t){return this.H(t)<12?"am":"pm"},aa:function(t){return this.H(t)<12?"a.m.":"p.m."},Z:function(t){return g(t.getTimezoneOffset(),":")},ZZ:function(t){return g(t.getTimezoneOffset())},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()}};function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DDTHH:mm:ss.SSSZ";if(0===t||t){var n=new Date(t);return e.replace(l,function(t,e){return t in V?V[t](n):void 0===e?t:e.split("\\]").join("]")})}}function U(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.match(l)}function I(t){return o(t)?new Date(t.getTime()):t}var $={isValid:m,buildDate:p,getDayOfWeek:D,getWeekOfYear:w,isBetweenDates:v,addToDate:M,subtractFromDate:b,adjustDate:y,startOfDate:Y,endOfDate:O,getMaxDate:S,getMinDate:q,getDateDiff:H,getDayOfYear:j,inferDateFormat:F,convertDateToFormat:_,getDateBetween:L,isSameDate:C,daysInMonth:k,formatter:V,formatDate:A,matchFormat:U,clone:I},E=n("iV8l"),z={name:"MyLayout",data:function(){return{openChangeLog:!1,repo:!1,uiVersion:"-",apiVersion:"-",changeLog:[]}},created:function(){var t=this;this.axios.get("/service/update?repo=ui").then(function(e){t.axios.get("/service/update?repo=api").then(function(n){t.uiVersion=e.data,t.apiVersion=n.data,t.applyUpdate()})})},filters:{date:function(t){return $.formatDate(t,"dddd DD MMMM YYYY - HH[h]mm")}},methods:{haltOrRebootDialog:function(){var t=this;this.$q.dialog({title:"Halt or Reboot",message:'Type "halt" or "reboot"',prompt:{model:""},cancel:!0}).then(function(e){"halt"===e.toLowerCase()?t.axios.post("/service/halt").then(function(e){201===e.status&&t.$router.push("/notconnected")}):"reboot"===e.toLowerCase()?(t.$q.loading.show({spinner:E["a"],message:"Waiting while rebooting...",spinnerSize:250,spinnerColor:"white"}),t.axios.post("/service/reboot").then(function(e){201===e.status&&setInterval(function(){t.axios.get("/service/serial").then(function(e){200===e.status&&(t.$q.loading.hide(),window.location.reload())})},1e4)})):t.$q.dialog({title:"Alert",message:'Keyword have to be "reboot" or "halt"'})})},getChangeLog:function(t){var e=this;this.repo=t.toUpperCase(),this.openChangeLog=!0,this.axios.get("/service/changelog?repo=".concat(t)).then(function(t){e.changeLog=t.data})},showLoading:function(t){this.$q.loading.hide(),this.$q.loading.show({spinner:E["a"],message:"Updating ".concat(t,"...please wait."),spinnerSize:250,spinnerColor:"white"})},pullUpdate:function(t,e){this.axios.post("/service/update?repo=".concat(t)).then(function(){return e()})},applyUpdate:function(){var t=this;"updateAvailable"===this.uiVersion?(this.showLoading("UI"),this.pullUpdate("ui",function(){"updateAvailable"===t.apiVersion?(t.showLoading("API"),t.pullUpdate("api",function(){window.location.reload()})):window.location.reload()})):"updateAvailable"===this.apiVersion&&(this.showLoading("API"),this.pullUpdate("api",function(){window.location.reload()}))}}},R=z,Z=(n("mXhf"),n("KHd+")),P=Object(Z["a"])(R,a,r,!1,null,null,null);e["default"]=P.exports},mXhf:function(t,e,n){"use strict";var a=n("NLq3"),r=n.n(a);r.a}}]);